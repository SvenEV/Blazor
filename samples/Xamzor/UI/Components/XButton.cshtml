@inherits UIElement

<button xamzorid="@Id" class="XButton" style="@LayoutCss" onclick="@OnClicked">
    @ChildContent
</button>

@functions{

    public Thickness Padding { get; set; } = Thickness.Zero;

    // This is a property because adding handlers to events via tag helpers doesn't seem to be supported yet
    public EventHandler<UIMouseEventArgs> Clicked { get; set; }

    protected override UIElementConfiguration OnConfiguring(UIElementConfiguration config) => base.OnConfiguring(config)
        .AffectsMeasure(nameof(Padding));

    protected override Point MeasureOverride(Point availableSize)
    {
        var childSize = this.Children().FirstOrDefault()?
            .Measure(availableSize - Padding.Size) ?? Point.Zero;

        return childSize + Padding.Size;
    }

    protected override Point ArrangeOverride(Point finalSize)
    {
        this.Children().FirstOrDefault()?.Arrange(new Rect(
            Padding.TopLeft,
            finalSize - Padding.Size));

        return finalSize;
    }

    private void OnClicked(UIMouseEventArgs e) => Clicked?.Invoke(this, e);
}